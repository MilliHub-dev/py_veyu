# Generated by Django 5.1.1 on 2025-12-04 10:30

import cloudinary.models
import django.core.validators
import django.db.models.deletion
import django.utils.timezone
import utils
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('auth', '0012_alter_user_first_name_max_length'),
    ]

    operations = [
        migrations.CreateModel(
            name='Dealership',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(blank=True, default=utils.make_UUID)),
                ('date_created', models.DateTimeField(auto_now=True)),
                ('last_updated', models.DateTimeField(auto_now=True)),
                ('phone_number', models.CharField(blank=True, max_length=20, null=True, unique=True, validators=[django.core.validators.RegexValidator(message='Enter a valid phone number in international format (e.g., +234XXXXXXXXXX)', regex='^\\+?[1-9]\\d{1,14}$')])),
                ('id_type', models.CharField(blank=True, choices=[('nin', 'National Identification'), ('drivers-license', "Driver's License"), ('voters-card', "Voter's Card"), ('passport', 'International Passport')], default='nin', max_length=200, null=True)),
                ('verified_phone_number', models.BooleanField(default=False)),
                ('verified_id', models.BooleanField(default=False)),
                ('verification_ref', models.CharField(blank=True, max_length=50, null=True, validators=[django.core.validators.RegexValidator(message='Verification reference can only contain uppercase letters, numbers, hyphens, and underscores', regex='^[A-Z0-9\\-_]+$')])),
                ('verification_status', models.CharField(choices=[('unverified', 'Requires Verification'), ('pending', 'Pending Verification'), ('completed', 'Account Approved')], default='unverified', max_length=20)),
                ('account_status', models.CharField(choices=[('pending', 'Pending Approval'), ('approved', 'Account Approved'), ('disabled', 'Account Disabled')], default='pending', max_length=20)),
                ('about', models.TextField(blank=True, null=True, validators=[django.core.validators.MaxLengthValidator(2000, message='About section cannot exceed 2000 characters')])),
                ('slug', models.SlugField(blank=True, null=True, unique=True)),
                ('logo', cloudinary.models.CloudinaryField(blank=True, max_length=255, null=True, verbose_name='logo')),
                ('business_name', models.CharField(blank=True, max_length=300, null=True, validators=[django.core.validators.MinLengthValidator(2, message='Business name must be at least 2 characters long'), django.core.validators.RegexValidator(message='Business name can only contain letters, numbers, spaces, hyphens, apostrophes, periods, and ampersands', regex="^[a-zA-Z0-9\\s\\-\\'\\.&]+$")])),
                ('headline', models.CharField(blank=True, max_length=200, null=True, validators=[django.core.validators.MaxLengthValidator(200, message='Headline cannot exceed 200 characters')])),
                ('contact_email', models.EmailField(blank=True, max_length=254, null=True, validators=[django.core.validators.EmailValidator(message='Enter a valid email address')])),
                ('contact_phone', models.CharField(blank=True, max_length=20, null=True, validators=[django.core.validators.RegexValidator(message='Enter a valid phone number', regex='^\\+?[1-9]\\d{1,14}$')])),
                ('cac_number', models.CharField(blank=True, max_length=200, null=True, validators=[django.core.validators.RegexValidator(message='Enter a valid CAC number (e.g., RC123456)', regex='^[A-Z]{2}\\d{6,8}$')])),
                ('tin_number', models.CharField(blank=True, max_length=200, null=True, validators=[django.core.validators.RegexValidator(message='Enter a valid TIN number (format: 12345678-1234)', regex='^\\d{8}-\\d{4}$')])),
                ('level', models.CharField(choices=[('new', 'New Seller'), ('level-1', 'Trusted Dealer'), ('star', 'Star Host'), ('top', 'Top Dealer')], default='new', max_length=20)),
                ('verified_business', models.BooleanField(default=False)),
                ('verified_tin', models.BooleanField(default=False)),
                ('verified_location', models.BooleanField(default=False)),
                ('offers_rental', models.BooleanField(default=False)),
                ('offers_purchase', models.BooleanField(default=True)),
                ('offers_drivers', models.BooleanField(default=False)),
                ('offers_trade_in', models.BooleanField(default=False)),
                ('extended_services', models.JSONField(blank=True, default=list)),
            ],
            options={
                'verbose_name': 'Dealership',
                'verbose_name_plural': 'Dealerships',
                'ordering': ['-date_created'],
            },
        ),
        migrations.CreateModel(
            name='Document',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(blank=True, default=utils.make_UUID)),
                ('date_created', models.DateTimeField(auto_now=True)),
                ('last_updated', models.DateTimeField(auto_now=True)),
                ('doctype', models.CharField(choices=[('drivers-license', "Driver's License"), ('nin', 'National Identification'), ('proof-of-address', 'Proof of Address')], max_length=200)),
            ],
            options={
                'verbose_name': 'Document',
                'verbose_name_plural': 'Documents',
                'ordering': ['-date_created'],
            },
        ),
        migrations.CreateModel(
            name='DocumentAccessLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(blank=True, default=utils.make_UUID)),
                ('date_created', models.DateTimeField(auto_now=True)),
                ('last_updated', models.DateTimeField(auto_now=True)),
                ('document_type', models.CharField(help_text="Type of document accessed (e.g., 'cac_document', 'tin_document')", max_length=50)),
                ('access_type', models.CharField(choices=[('view', 'View'), ('download', 'Download'), ('thumbnail', 'Thumbnail')], default='view', help_text='Type of access performed', max_length=20)),
                ('ip_address', models.GenericIPAddressField(help_text='IP address of the user accessing the document')),
                ('user_agent', models.TextField(blank=True, help_text='Browser user agent string')),
                ('success', models.BooleanField(default=True, help_text='Whether the access attempt was successful')),
                ('failure_reason', models.CharField(blank=True, help_text='Reason for access failure (if applicable)', max_length=255)),
            ],
            options={
                'verbose_name': 'Document Access Log',
                'verbose_name_plural': 'Document Access Logs',
                'ordering': ['-date_created'],
            },
        ),
        migrations.CreateModel(
            name='File',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(blank=True, default=utils.make_UUID)),
                ('date_created', models.DateTimeField(auto_now=True)),
                ('last_updated', models.DateTimeField(auto_now=True)),
                ('name', models.CharField(blank=True, max_length=200, null=True)),
                ('file', models.FileField(upload_to='docs/')),
            ],
            options={
                'verbose_name': 'File',
                'verbose_name_plural': 'Files',
                'ordering': ['-date_created'],
            },
        ),
        migrations.CreateModel(
            name='Location',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(blank=True, default=utils.make_UUID)),
                ('date_created', models.DateTimeField(auto_now=True)),
                ('last_updated', models.DateTimeField(auto_now=True)),
                ('country', models.CharField(choices=[('NG', 'Nigeria'), ('GH', 'Ghana'), ('KE', 'Kenya'), ('ZA', 'South Africa')], default='NG', max_length=2)),
                ('state', models.CharField(max_length=200, validators=[django.core.validators.MinLengthValidator(2, message='State name must be at least 2 characters long'), django.core.validators.RegexValidator(message='State name can only contain letters, spaces, hyphens, apostrophes, and periods', regex="^[a-zA-Z\\s\\-\\'\\.]+$")])),
                ('city', models.CharField(blank=True, max_length=200, null=True, validators=[django.core.validators.RegexValidator(message='City name can only contain letters, spaces, hyphens, apostrophes, and periods', regex="^[a-zA-Z\\s\\-\\'\\.]+$")])),
                ('address', models.CharField(max_length=300, validators=[django.core.validators.MinLengthValidator(5, message='Address must be at least 5 characters long')])),
                ('zip_code', models.CharField(blank=True, max_length=10, null=True, validators=[django.core.validators.RegexValidator(message='Zip code must be 3-10 digits', regex='^\\d{3,10}$')])),
                ('lat', models.DecimalField(blank=True, decimal_places=7, max_digits=10, null=True, validators=[django.core.validators.RegexValidator(message='Enter a valid latitude (-90 to 90)', regex='^-?([0-8]?[0-9]|90)(\\.[0-9]{1,7})?$')])),
                ('lng', models.DecimalField(blank=True, decimal_places=7, max_digits=10, null=True, validators=[django.core.validators.RegexValidator(message='Enter a valid longitude (-180 to 180)', regex='^-?(1[0-7][0-9]|[0-9]?[0-9])(\\.[0-9]{1,7})?$')])),
                ('google_place_id', models.CharField(blank=True, max_length=100, null=True)),
            ],
        ),
        migrations.CreateModel(
            name='Mechanic',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(blank=True, default=utils.make_UUID)),
                ('date_created', models.DateTimeField(auto_now=True)),
                ('last_updated', models.DateTimeField(auto_now=True)),
                ('phone_number', models.CharField(blank=True, max_length=20, null=True, unique=True, validators=[django.core.validators.RegexValidator(message='Enter a valid phone number in international format (e.g., +234XXXXXXXXXX)', regex='^\\+?[1-9]\\d{1,14}$')])),
                ('id_type', models.CharField(blank=True, choices=[('nin', 'National Identification'), ('drivers-license', "Driver's License"), ('voters-card', "Voter's Card"), ('passport', 'International Passport')], default='nin', max_length=200, null=True)),
                ('verified_phone_number', models.BooleanField(default=False)),
                ('verified_id', models.BooleanField(default=False)),
                ('verification_ref', models.CharField(blank=True, max_length=50, null=True, validators=[django.core.validators.RegexValidator(message='Verification reference can only contain uppercase letters, numbers, hyphens, and underscores', regex='^[A-Z0-9\\-_]+$')])),
                ('verification_status', models.CharField(choices=[('unverified', 'Requires Verification'), ('pending', 'Pending Verification'), ('completed', 'Account Approved')], default='unverified', max_length=20)),
                ('account_status', models.CharField(choices=[('pending', 'Pending Approval'), ('approved', 'Account Approved'), ('disabled', 'Account Disabled')], default='pending', max_length=20)),
                ('about', models.TextField(blank=True, null=True, validators=[django.core.validators.MaxLengthValidator(2000, message='About section cannot exceed 2000 characters')])),
                ('business_name', models.CharField(blank=True, max_length=300, null=True, validators=[django.core.validators.MinLengthValidator(2, message='Business name must be at least 2 characters long'), django.core.validators.RegexValidator(message='Business name can only contain letters, numbers, spaces, hyphens, apostrophes, periods, and ampersands', regex="^[a-zA-Z0-9\\s\\-\\'\\.&]+$")])),
                ('slug', models.SlugField(blank=True, null=True, unique=True)),
                ('logo', cloudinary.models.CloudinaryField(blank=True, max_length=255, null=True, verbose_name='mechanic_logo')),
                ('level', models.CharField(choices=[('new', 'New Seller'), ('level-1', 'Trusted Mechanic'), ('top', 'Top Rated')], default='new', max_length=20)),
                ('headline', models.CharField(blank=True, max_length=200, null=True, validators=[django.core.validators.MaxLengthValidator(200, message='Headline cannot exceed 200 characters')])),
                ('available', models.BooleanField(default=True)),
                ('business_type', models.CharField(choices=[('business', 'Registered Business'), ('individual', 'Individual Mechanic')], default='business', max_length=50)),
                ('verified_business', models.BooleanField(default=False)),
                ('contact_email', models.EmailField(blank=True, max_length=254, null=True, validators=[django.core.validators.EmailValidator(message='Enter a valid email address')])),
                ('contact_phone', models.CharField(blank=True, max_length=20, null=True, validators=[django.core.validators.RegexValidator(message='Enter a valid phone number', regex='^\\+?[1-9]\\d{1,14}$')])),
            ],
            options={
                'verbose_name': 'Mechanic Profile',
                'verbose_name_plural': 'Mechanic Profiles',
                'ordering': ['-date_created'],
            },
        ),
        migrations.CreateModel(
            name='MechanicBoost',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(blank=True, default=utils.make_UUID)),
                ('date_created', models.DateTimeField(auto_now=True)),
                ('last_updated', models.DateTimeField(auto_now=True)),
                ('start_date', models.DateField()),
                ('end_date', models.DateField()),
                ('amount_paid', models.DecimalField(decimal_places=2, max_digits=10)),
                ('active', models.BooleanField(default=True)),
            ],
            options={
                'verbose_name': 'Mechanic Boost',
                'verbose_name_plural': 'Mechanic Boosts',
                'ordering': ['-start_date'],
            },
        ),
        migrations.CreateModel(
            name='Newsletter',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=200)),
                ('subject', models.CharField(max_length=200)),
                ('content', models.TextField(help_text='HTML content of the newsletter')),
                ('preview_text', models.CharField(blank=True, help_text='Short preview text shown in email clients', max_length=200)),
                ('status', models.CharField(choices=[('draft', 'Draft'), ('scheduled', 'Scheduled'), ('sending', 'Sending'), ('sent', 'Sent'), ('failed', 'Failed')], default='draft', max_length=20)),
                ('audience', models.CharField(choices=[('all', 'All Users'), ('customers', 'Customers Only'), ('mechanics', 'Mechanics Only'), ('dealers', 'Dealerships Only'), ('custom', 'Custom Recipients')], default='all', max_length=20)),
                ('scheduled_for', models.DateTimeField(blank=True, help_text='Schedule for future sending (leave blank to send immediately)', null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('sent_at', models.DateTimeField(blank=True, null=True)),
                ('total_recipients', models.PositiveIntegerField(default=0)),
                ('total_sent', models.PositiveIntegerField(default=0)),
                ('total_failed', models.PositiveIntegerField(default=0)),
            ],
            options={
                'verbose_name': 'Newsletter',
                'verbose_name_plural': 'Newsletters',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='OTP',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(blank=True, default=utils.make_UUID)),
                ('date_created', models.DateTimeField(auto_now=True)),
                ('last_updated', models.DateTimeField(auto_now=True)),
                ('code', models.CharField(default=utils.make_random_otp, max_length=8)),
                ('used', models.BooleanField(default=False)),
                ('channel', models.CharField(choices=[('email', 'Email'), ('sms', 'SMS')], default='email', max_length=20)),
                ('expires_at', models.DateTimeField(blank=True, null=True)),
                ('attempts', models.PositiveIntegerField(default=0)),
                ('max_attempts', models.PositiveIntegerField(default=3)),
                ('purpose', models.CharField(choices=[('verification', 'Account Verification'), ('password_reset', 'Password Reset'), ('login', 'Login Verification'), ('phone_verification', 'Phone Verification')], default='verification', max_length=50)),
            ],
            options={
                'verbose_name': 'One Time Pin (OTP)',
                'verbose_name_plural': 'One Time Pins (OTPs)',
                'ordering': ['-date_created'],
            },
        ),
        migrations.CreateModel(
            name='PayoutInformation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(blank=True, default=utils.make_UUID)),
                ('date_created', models.DateTimeField(auto_now=True)),
                ('last_updated', models.DateTimeField(auto_now=True)),
                ('channel', models.CharField(choices=[('bank', 'Bank Transfer'), ('mobile_money', 'Mobile Money'), ('wallet', 'Digital Wallet')], default='bank', max_length=200)),
                ('bank_name', models.CharField(max_length=200, validators=[django.core.validators.MinLengthValidator(2, message='Bank name must be at least 2 characters long'), django.core.validators.RegexValidator(message='Bank name can only contain letters, spaces, hyphens, apostrophes, periods, and ampersands', regex="^[a-zA-Z\\s\\-\\'\\.&]+$")])),
                ('account_holder_name', models.CharField(max_length=200, validators=[django.core.validators.MinLengthValidator(2, message='Account holder name must be at least 2 characters long'), django.core.validators.RegexValidator(message='Account holder name can only contain letters, spaces, hyphens, apostrophes, and periods', regex="^[a-zA-Z\\s\\-\\'\\.]+$")])),
                ('account_number', models.CharField(max_length=20, validators=[django.core.validators.RegexValidator(message='Account number must be 10-20 digits', regex='^\\d{10,20}$')])),
            ],
            options={
                'verbose_name': 'Payout Information',
                'verbose_name_plural': 'Payout Information',
                'ordering': ['-date_created'],
            },
        ),
        migrations.CreateModel(
            name='Account',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('password', models.CharField(max_length=128, verbose_name='password')),
                ('last_login', models.DateTimeField(blank=True, null=True, verbose_name='last login')),
                ('is_superuser', models.BooleanField(default=False, help_text='Designates that this user has all permissions without explicitly assigning them.', verbose_name='superuser status')),
                ('uuid', models.UUIDField(blank=True, default=utils.make_UUID)),
                ('date_created', models.DateTimeField(auto_now=True)),
                ('last_updated', models.DateTimeField(auto_now=True)),
                ('email', models.EmailField(max_length=254, unique=True, validators=[django.core.validators.EmailValidator(message='Enter a valid email address')])),
                ('first_name', models.CharField(blank=True, max_length=150, validators=[django.core.validators.MinLengthValidator(2, message='First name must be at least 2 characters long'), django.core.validators.RegexValidator(message='First name can only contain letters, spaces, hyphens, apostrophes, and periods', regex="^[a-zA-Z\\s\\-\\'\\.]+$")])),
                ('last_name', models.CharField(blank=True, max_length=150, validators=[django.core.validators.MinLengthValidator(2, message='Last name must be at least 2 characters long'), django.core.validators.RegexValidator(message='Last name can only contain letters, spaces, hyphens, apostrophes, and periods', regex="^[a-zA-Z\\s\\-\\'\\.]+$")])),
                ('verified_email', models.BooleanField(default=False)),
                ('api_token', models.CharField(blank=True, max_length=64, null=True, unique=True)),
                ('provider', models.CharField(choices=[('veyu', 'Veyu'), ('google', 'Google'), ('facebook', 'Facebook'), ('apple', 'Apple')], default='veyu', max_length=20)),
                ('is_active', models.BooleanField(default=True)),
                ('is_staff', models.BooleanField(default=False)),
                ('date_joined', models.DateTimeField(default=django.utils.timezone.now)),
                ('user_type', models.CharField(choices=[('admin', 'Admin'), ('staff', 'Staff / Agent'), ('customer', 'Customer'), ('dealer', 'Car Dealer'), ('mechanic', 'Mechanic')], default='customer', max_length=20)),
                ('welcome_email_sent_at', models.DateTimeField(blank=True, help_text='Timestamp when welcome email was sent on first login', null=True)),
                ('role', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='auth.group')),
            ],
            options={
                'ordering': ['-date_joined'],
            },
        ),
        migrations.CreateModel(
            name='BillingInformation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(blank=True, default=utils.make_UUID)),
                ('date_created', models.DateTimeField(auto_now=True)),
                ('last_updated', models.DateTimeField(auto_now=True)),
                ('card_holder_name', models.CharField(max_length=200)),
                ('card_number', models.CharField(max_length=20)),
                ('card_exp_month', models.CharField(max_length=2)),
                ('card_exp_year', models.CharField(max_length=4)),
                ('card_cvv', models.CharField(max_length=3)),
                ('is_primary', models.BooleanField(default=False)),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='billing_accounts', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Billing Information',
                'verbose_name_plural': 'Billing Information',
                'ordering': ['-is_primary', '-date_created'],
            },
        ),
        migrations.CreateModel(
            name='BusinessVerificationSubmission',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(blank=True, default=utils.make_UUID)),
                ('date_created', models.DateTimeField(auto_now=True)),
                ('last_updated', models.DateTimeField(auto_now=True)),
                ('business_type', models.CharField(choices=[('dealership', 'Dealership'), ('mechanic', 'Mechanic')], max_length=20)),
                ('status', models.CharField(choices=[('not_submitted', 'Not Submitted'), ('pending', 'Pending Review'), ('verified', 'Verified'), ('rejected', 'Rejected')], default='pending', max_length=20)),
                ('business_name', models.CharField(max_length=300, validators=[django.core.validators.MinLengthValidator(2, message='Business name must be at least 2 characters long'), django.core.validators.RegexValidator(message='Business name can only contain letters, numbers, spaces, hyphens, apostrophes, periods, and ampersands', regex="^[a-zA-Z0-9\\s\\-\\'\\.&]+$")])),
                ('cac_number', models.CharField(blank=True, help_text='Corporate Affairs Commission Number', max_length=200, null=True, validators=[django.core.validators.RegexValidator(message='Enter a valid CAC number (e.g., RC123456)', regex='^[A-Z]{2}\\d{6,8}$')])),
                ('tin_number', models.CharField(blank=True, help_text='Tax Identification Number', max_length=200, null=True, validators=[django.core.validators.RegexValidator(message='Enter a valid TIN number (format: 12345678-1234)', regex='^\\d{8}-\\d{4}$')])),
                ('business_address', models.TextField(validators=[django.core.validators.MinLengthValidator(10, message='Business address must be at least 10 characters long')])),
                ('business_email', models.EmailField(max_length=254, validators=[django.core.validators.EmailValidator(message='Enter a valid email address')])),
                ('business_phone', models.CharField(max_length=20, validators=[django.core.validators.RegexValidator(message='Enter a valid phone number', regex='^\\+?[1-9]\\d{1,14}$')])),
                ('cac_document', cloudinary.models.CloudinaryField(blank=True, help_text='CAC registration certificate (PDF, JPG, PNG - max 5MB)', max_length=255, null=True, verbose_name='business_documents')),
                ('tin_document', cloudinary.models.CloudinaryField(blank=True, help_text='TIN certificate (PDF, JPG, PNG - max 5MB)', max_length=255, null=True, verbose_name='business_documents')),
                ('proof_of_address', cloudinary.models.CloudinaryField(blank=True, help_text='Proof of business address (PDF, JPG, PNG - max 5MB)', max_length=255, null=True, verbose_name='business_documents')),
                ('business_license', cloudinary.models.CloudinaryField(blank=True, help_text='Business license or permit (PDF, JPG, PNG - max 5MB)', max_length=255, null=True, verbose_name='business_documents')),
                ('cac_document_uploaded_at', models.DateTimeField(blank=True, null=True)),
                ('cac_document_original_name', models.CharField(blank=True, max_length=255)),
                ('tin_document_uploaded_at', models.DateTimeField(blank=True, null=True)),
                ('tin_document_original_name', models.CharField(blank=True, max_length=255)),
                ('proof_of_address_uploaded_at', models.DateTimeField(blank=True, null=True)),
                ('proof_of_address_original_name', models.CharField(blank=True, max_length=255)),
                ('business_license_uploaded_at', models.DateTimeField(blank=True, null=True)),
                ('business_license_original_name', models.CharField(blank=True, max_length=255)),
                ('migrated_to_cloudinary', models.BooleanField(default=False)),
                ('migration_date', models.DateTimeField(blank=True, null=True)),
                ('reviewed_at', models.DateTimeField(blank=True, null=True)),
                ('admin_notes', models.TextField(blank=True, help_text='Internal notes from admin review', null=True)),
                ('rejection_reason', models.TextField(blank=True, help_text='Reason for rejection (shown to user)', null=True)),
                ('reviewed_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='admin_reviewed_verifications', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Business Verification Submission',
                'verbose_name_plural': 'Business Verification Submissions',
                'ordering': ['-date_created'],
            },
        ),
        migrations.CreateModel(
            name='Customer',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(blank=True, default=utils.make_UUID)),
                ('date_created', models.DateTimeField(auto_now=True)),
                ('last_updated', models.DateTimeField(auto_now=True)),
                ('phone_number', models.CharField(blank=True, max_length=20, null=True, unique=True, validators=[django.core.validators.RegexValidator(message='Enter a valid phone number in international format (e.g., +234XXXXXXXXXX)', regex='^\\+?[1-9]\\d{1,14}$')])),
                ('id_type', models.CharField(blank=True, choices=[('nin', 'National Identification'), ('drivers-license', "Driver's License"), ('voters-card', "Voter's Card"), ('passport', 'International Passport')], default='nin', max_length=200, null=True)),
                ('verified_phone_number', models.BooleanField(default=False)),
                ('verified_id', models.BooleanField(default=False)),
                ('verification_ref', models.CharField(blank=True, max_length=50, null=True, validators=[django.core.validators.RegexValidator(message='Verification reference can only contain uppercase letters, numbers, hyphens, and underscores', regex='^[A-Z0-9\\-_]+$')])),
                ('verification_status', models.CharField(choices=[('unverified', 'Requires Verification'), ('pending', 'Pending Verification'), ('completed', 'Account Approved')], default='unverified', max_length=20)),
                ('account_status', models.CharField(choices=[('pending', 'Pending Approval'), ('approved', 'Account Approved'), ('disabled', 'Account Disabled')], default='pending', max_length=20)),
                ('image', cloudinary.models.CloudinaryField(blank=True, max_length=255, null=True, verbose_name='profile_image')),
                ('billing_info', models.ManyToManyField(blank=True, related_name='%(class)s_billing', to='accounts.billinginformation')),
            ],
            options={
                'verbose_name': 'Customer Profile',
                'verbose_name_plural': 'Customer Profiles',
                'ordering': ['-date_created'],
            },
        ),
    ]
